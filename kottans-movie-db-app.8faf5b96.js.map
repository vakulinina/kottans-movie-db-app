{"version":3,"sources":["index.js"],"names":["App","PopularMovie","SearchByMovie","MoviesGrid","renderApp","document","querySelector","innerHTML","backdrop_path","original_title","overview","window","currentState","popularMovies","styles","performSearch","value","searchValue","fetch","then","response","json","data","searchResult","results","finally","loadPopularMovies","title","movies","getMoviesCards","moviesItems","forEach","poster_path","moviesItem","selectedMovie"],"mappings":";;;AA+GC,aA/GD,IAAA,EAAA,EAAA,QAAA,gBA+GC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAlGD,SAASA,IACC,0BAEJC,YACAC,YACAC,sBAKN,SAASC,IACPC,SAASC,cAAc,aAAaC,aAAeP,MAMrD,SAASC,IACD,MAAA,cAAEO,EAAF,eAAiBC,EAAjB,SAAiCC,GAAaC,OAAOC,aAAaC,cAAc,GAC9E,+BACYC,EAAO,QAAA,yCACTA,EAAO,QAAA,8DAA8DN,0BACrEM,EAAO,QAAA,+CACbL,sBACDC,0CAMb,SAASK,EAAcC,GACrBL,OAAOC,aAAaK,YAAcD,EAC5B,MAAA,YAAEC,GAAgBN,OAAOC,aAC3BK,EACFC,iHACwGD,KAErGE,KAAKC,GAAYA,EAASC,QAC1BF,KAAKG,IACJX,OAAOC,aAAaW,aAAeD,EAAKE,UAEzCC,QAAQd,OAAOP,WAElBA,IAIJ,SAASF,IACC,oCAEKY,EAAO,QAAA,uDAEPH,OAAOC,aAAaK,aAAe,+DAKlD,SAASS,IACPR,MACG,sGAEAC,KAAKC,GAAYA,EAASC,QAC1BF,KAAKG,IACJX,OAAOC,aAAaC,cAAgBS,EAAKE,UAE1CC,QAAQd,OAAOP,WAGpB,SAASD,IACHwB,IACAC,EADAD,EAAQ,iBAEN,MAAA,YAAEV,EAAF,aAAeM,EAAf,cAA6BV,GAAkBF,OAAOC,aAQpD,OAPJK,GACFW,EAASC,EAAeN,GACxBI,EAAQ,kBAERC,EAASC,EAAehB,GACxBc,EAAQ,uCAGMb,EAAO,QAAA,oCACba,6BACQb,EAAO,QAAA,mBAAmBc,0BAK9C,SAASC,EAAeD,GAClBE,IAAAA,EAAc,GASXA,OARPF,EAAOG,QAAQ,EAAGtB,eAAAA,EAAgBuB,YAAAA,MAC1BC,MAAAA,uBACQnB,EAAO,QAAA,mCAAmCL,yDACTuB,WAAqBvB,wBAGpEqB,GAAeG,IAEVH,EA5GTnB,OAAOC,aAAe,CACpBK,YAAa,GACbM,aAAc,GACdV,cAAe,GACfqB,cAAe,MAGjBvB,OAAOP,UAAYA,EACnBO,OAAOI,cAAgBA,EACvBJ,OAAOe,kBAAoBA,EAgB3Bf,OAAOe","file":"kottans-movie-db-app.8faf5b96.js","sourceRoot":"..","sourcesContent":["import styles from './style.css';\n\nwindow.currentState = {\n  searchValue: '',\n  searchResult: [],\n  popularMovies: [],\n  selectedMovie: null,\n};\n\nwindow.renderApp = renderApp;\nwindow.performSearch = performSearch;\nwindow.loadPopularMovies = loadPopularMovies;\n\nfunction App() {\n  return `\n    <div>\n    ${PopularMovie()}\n    ${SearchByMovie()}\n    ${MoviesGrid()}\n    </div>\n  `;\n}\n\nfunction renderApp() {\n  document.querySelector('#app-root').innerHTML = `${App()}`;\n}\n\nwindow.loadPopularMovies();\n// window.renderApp();\n\nfunction PopularMovie() {\n  const { backdrop_path, original_title, overview } = window.currentState.popularMovies[0];\n  return `\n    <article class=\"${styles['popular-movie']}\">\n      <img class=\"${styles['popular-movie-img']}\" src=\"http://image.tmdb.org/t/p/w1280/${backdrop_path}\">\n      <div class=\"${styles['popular-movie-description']}\">\n        <h2>${original_title}</h2>\n        <p>${overview}</p>\n      </div>\n    </article>\n  `;\n}\n\nfunction performSearch(value) {\n  window.currentState.searchValue = value;\n  const { searchValue } = window.currentState;\n  if (searchValue) {\n    fetch(\n      `https://api.themoviedb.org/3/search/movie?api_key=${process.env.TMDB_API_KEY}&language=en-US&query=${searchValue}`,\n    )\n      .then(response => response.json())\n      .then(data => {\n        window.currentState.searchResult = data.results;\n      })\n      .finally(window.renderApp);\n  } else {\n    renderApp();\n  }\n}\n\nfunction SearchByMovie() {\n  return `\n    <input\n      class=\"${styles['search-input']}\"\n      type=\"search\"\n      value=\"${window.currentState.searchValue || ''}\"\n      onchange=\"window.performSearch(this.value);\">\n  `;\n}\n\nfunction loadPopularMovies() {\n  fetch(\n    `https://api.themoviedb.org/3/movie/popular?api_key=${process.env.TMDB_API_KEY}&language=en-US`,\n  )\n    .then(response => response.json())\n    .then(data => {\n      window.currentState.popularMovies = data.results;\n    })\n    .finally(window.renderApp);\n}\n\nfunction MoviesGrid() {\n  let title = 'Popular Movies';\n  let movies;\n  const { searchValue, searchResult, popularMovies } = window.currentState;\n  if (searchValue) {\n    movies = getMoviesCards(searchResult);\n    title = 'Search Result';\n  } else {\n    movies = getMoviesCards(popularMovies);\n    title = 'Popular Movies';\n  }\n  return `\n    <div class=\"${styles['movies-list-wrap']}\">\n      <h3>${title}</h3>\n      <div class=\"${styles['movies-list']}\">${movies}</div>\n    </div>\n  `;\n}\n\nfunction getMoviesCards(movies) {\n  let moviesItems = '';\n  movies.forEach(({ original_title, poster_path }) => {\n    const moviesItem = `\n      <a class=\"${styles['movies-item']}\" href=\"#\" title=\"${original_title}\">\n        <img src=\"http://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"${original_title}\">\n      </a>\n    `;\n    moviesItems += moviesItem;\n  });\n  return moviesItems;\n}\n"]}